(function(p,j){typeof exports=="object"&&typeof module<"u"?module.exports=j():typeof define=="function"&&define.amd?define(j):(p=typeof globalThis<"u"?globalThis:p||self,p.TocHelper=j())})(this,function(){"use strict";function p(){}const j=e=>e;function Te(e){return e()}function Ne(){return Object.create(null)}function H(e){e.forEach(Te)}function G(e){return typeof e=="function"}function de(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ft(e){return Object.keys(e).length===0}function ut(e,...t){if(e==null)return p;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function te(e,t,n){e.$$.on_destroy.push(ut(t,n))}function L(e,t,n){return e.set(n),t}function at(e){return e&&G(e.destroy)?e.destroy:p}const Ce=typeof window<"u";let Fe=Ce?()=>window.performance.now():()=>Date.now(),me=Ce?e=>requestAnimationFrame(e):p;const q=new Set;function Pe(e){q.forEach(t=>{t.c(e)||(q.delete(t),t.f())}),q.size!==0&&me(Pe)}function Ae(e){let t;return q.size===0&&me(Pe),{promise:new Promise(n=>{q.add(t={c:e,f:n})}),abort(){q.delete(t)}}}function he(e,t){e.appendChild(t)}function dt(e,t,n){const o=ge(e);if(!o.getElementById(t)){const i=Y("style");i.id=t,i.textContent=n,He(o,i)}}function ge(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function mt(e){const t=Y("style");return He(ge(e),t),t.sheet}function He(e,t){he(e.head||e,t)}function I(e,t,n){e.insertBefore(t,n||null)}function M(e){e.parentNode.removeChild(e)}function ht(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Y(e){return document.createElement(e)}function _e(e){return document.createTextNode(e)}function gt(){return _e(" ")}function Me(){return _e("")}function ne(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function z(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _t(e){return Array.from(e.childNodes)}function bt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ze(e,t,n){e.classList[n?"add":"remove"](t)}function vt(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}const oe=new Map;let ie=0;function yt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Et(e,t){const n={stylesheet:mt(t),rules:{}};return oe.set(e,n),n}function Re(e,t,n,o,i,l,s,f=0){const r=16.666/o;let u=`{
`;for(let b=0;b<=1;b+=r){const O=t+(n-t)*l(b);u+=b*100+`%{${s(O,1-O)}}
`}const d=u+`100% {${s(n,1-n)}}
}`,a=`__svelte_${yt(d)}_${f}`,c=ge(e),{stylesheet:g,rules:_}=oe.get(c)||Et(c,e);_[a]||(_[a]=!0,g.insertRule(`@keyframes ${a} ${d}`,g.cssRules.length));const E=e.style.animation||"";return e.style.animation=`${E?`${E}, `:""}${a} ${o}ms linear ${i}ms 1 both`,ie+=1,a}function be(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?l=>l.indexOf(t)<0:l=>l.indexOf("__svelte")===-1),i=n.length-o.length;i&&(e.style.animation=o.join(", "),ie-=i,ie||wt())}function wt(){me(()=>{ie||(oe.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),oe.clear())})}let J;function Q(e){J=e}function pt(){if(!J)throw new Error("Function called outside component initialization");return J}function St(e){pt().$$.on_mount.push(e)}const U=[],ve=[],le=[],je=[],Ot=Promise.resolve();let ye=!1;function xt(){ye||(ye=!0,Ot.then(qe))}function B(e){le.push(e)}const Ee=new Set;let se=0;function qe(){const e=J;do{for(;se<U.length;){const t=U[se];se++,Q(t),kt(t.$$)}for(Q(null),U.length=0,se=0;ve.length;)ve.pop()();for(let t=0;t<le.length;t+=1){const n=le[t];Ee.has(n)||(Ee.add(n),n())}le.length=0}while(U.length);for(;je.length;)je.pop()();ye=!1,Ee.clear(),Q(e)}function kt(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}let X;function Ie(){return X||(X=Promise.resolve(),X.then(()=>{X=null})),X}function re(e,t,n){e.dispatchEvent(vt(`${t?"intro":"outro"}${n}`))}const ce=new Set;let P;function we(){P={r:0,c:[],p:P}}function pe(){P.r||H(P.c),P=P.p}function k(e,t){e&&e.i&&(ce.delete(e),e.i(t))}function A(e,t,n,o){if(e&&e.o){if(ce.has(e))return;ce.add(e),P.c.push(()=>{ce.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}const Ye={duration:0};function Lt(e,t,n){let o=t(e,n),i=!1,l,s,f=0;function r(){l&&be(e,l)}function u(){const{delay:a=0,duration:c=300,easing:g=j,tick:_=p,css:E}=o||Ye;E&&(l=Re(e,0,1,c,a,g,E,f++)),_(0,1);const b=Fe()+a,O=b+c;s&&s.abort(),i=!0,B(()=>re(e,!0,"start")),s=Ae(C=>{if(i){if(C>=O)return _(1,0),re(e,!0,"end"),r(),i=!1;if(C>=b){const D=g((C-b)/c);_(D,1-D)}}return i})}let d=!1;return{start(){d||(d=!0,be(e),G(o)?(o=o(),Ie().then(u)):u())},invalidate(){d=!1},end(){i&&(r(),i=!1)}}}function Dt(e,t,n){let o=t(e,n),i=!0,l;const s=P;s.r+=1;function f(){const{delay:r=0,duration:u=300,easing:d=j,tick:a=p,css:c}=o||Ye;c&&(l=Re(e,1,0,u,r,d,c));const g=Fe()+r,_=g+u;B(()=>re(e,!1,"start")),Ae(E=>{if(i){if(E>=_)return a(0,1),re(e,!1,"end"),--s.r||H(s.c),!1;if(E>=g){const b=d((E-g)/u);a(1-b,b)}}return i})}return G(o)?Ie().then(()=>{o=o(),f()}):f(),{end(r){r&&o.tick&&o.tick(1,0),i&&(l&&be(e,l),i=!1)}}}function Be(e){e&&e.c()}function Se(e,t,n,o){const{fragment:i,on_mount:l,on_destroy:s,after_update:f}=e.$$;i&&i.m(t,n),o||B(()=>{const r=l.map(Te).filter(G);s?s.push(...r):H(r),e.$$.on_mount=[]}),f.forEach(B)}function Oe(e,t){const n=e.$$;n.fragment!==null&&(H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Tt(e,t){e.$$.dirty[0]===-1&&(U.push(e),xt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function We(e,t,n,o,i,l,s,f=[-1]){const r=J;Q(e);const u=e.$$={fragment:null,ctx:null,props:l,update:p,not_equal:i,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Ne(),dirty:f,skip_bound:!1,root:t.target||r.$$.root};s&&s(u.root);let d=!1;if(u.ctx=n?n(e,t.props||{},(a,c,...g)=>{const _=g.length?g[0]:c;return u.ctx&&i(u.ctx[a],u.ctx[a]=_)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](_),d&&Tt(e,a)),c}):[],u.update(),d=!0,H(u.before_update),u.fragment=o?o(u.ctx):!1,t.target){if(t.hydrate){const a=_t(t.target);u.fragment&&u.fragment.l(a),a.forEach(M)}else u.fragment&&u.fragment.c();t.intro&&k(e.$$.fragment),Se(e,t.target,t.anchor,t.customElement),qe()}Q(r)}class Ke{$destroy(){Oe(this,1),this.$destroy=p}$on(t,n){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!ft(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xe=window.requestAnimationFrame,Nt=window.cancelAnimationFrame,v=function(e,t,...n){if(typeof e=="function")return e.call(t,...n)},fe=function(e){return e===document.body||e===document},Ve=/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)?"touchstart":"click",Ct=/^h(\d)$/i;let ke=0;const Ft=(e,t,n,o,i,l,s)=>{i=i||"bitoc-heading-",l=l||"bitoc-ml-";let f=e.getAttribute("id");ke=ke+1;let r=f;f||(f=i+ke);const u=(e.textContent||"").trim();return{class:l+t,title:u,parent:o,target:e,level:t,oriLevel:n,id:f,oriId:r,y:Z(e,s).y}},Ge=function(e,t){return e?e.level===t?e.parent:e.level===t-1?e:Ge(e.parent,t):null},Pt=(e,t,n,o)=>{if(!e||!e.length)return{nodes:[],offsets:{}};const i={},l=[];let s=null;return e.forEach(f=>{let r=null;const u=Ct.exec(f.nodeName);u?r=u[1]:r=f.getAttribute("data-level"),r=parseInt(r),r=Math.max(1,Math.min(r,6))||6;let d=r,a=null;s?s.level>=r?(a=Ge(s.parent,r),d=a?a.level+1:1):(d=s.level+1,a=s):(d=1,a=null);const c=Ft(f,d,r,a,t,n,o);a?a.nodes?a.nodes.push(c):a.nodes=[c]:l.push(c),s=c,i[c.y]=c}),{nodes:l,offsets:i}},At=function(e,t=16){let n,o=!1,i=Date.now();const l=()=>{o=!0,n&&Nt(n)},s=()=>{if(!o){if(Date.now()-i>=t){l(),v(e,this,n);return}n=xe(s)}};return s(),l},Ht=function(e,t=24){let n=null;return function(){const o=this,i=arguments,l=Date.now();(!n||l-n>t)&&(e.apply(o,i),n=l)}},Mt=function(e,t,n){(e<=0||isNaN(e))&&(e=500);const o=Date.now();let i=!0;return xe(function l(){const s=(Date.now()-o)/e;v(t,void 0,s),s>=1&&(t(1),i=!1,v(n,void 0,1)),i&&xe(l)}),function(){i=!1}},Je=function(e){return e.scrollHeight>e.clientHeight},Z=function(e,t){let n=t;(!t||fe(t))&&(n=document.documentElement);let o=e.offsetTop||0,i=e.offsetLeft||0;const l=e.offsetParent;if(fe(e)||!l)return{x:i,y:o};if(l===n.offsetParent){const s=n.offsetTop||0,f=n.offsetLeft||0;return{x:i-f,y:o-s}}if(l!==n){const s=Z(l);o+=s.y,i+=s.x}return{x:i,y:o}},ue=function(e){return e===window?e.screenY:e===document?document.scrollingElement.scrollTop:e.scrollTop},zt=function(e,t,n){if(t&&!n)return window.getComputedStyle(e).getPropertyValue(t);e.style[t]=n},Qe=function(e){return fe(e)?document:!e||Je(e)?e:zt(e,"position")==="fixed"||!e.parentElement?document:Qe(e.parentElement)},Ue=(e,t,n,o)=>{let i=0;const l=o||100;return function s(f,r,u){if(ue(f)===r)i=0,v(u);else{if(i>l){i=0,v(u);return}i+=1,At(()=>{s(f,r,u)})}}(e,t,n)},Xe=function(e,t,n=200,o){if(Je(e)){const i=ue(e),l=t-i;Mt(n,s=>{e.scrollTo({left:0,top:i+s*l,behavior:"smooth"})},o)}else v(o,void 0,1)};function Rt(e){const t=e-1;return t*t*t+1}const Ze=function(e,{delay:t=0,duration:n=150,easing:o=Rt}={}){const i=getComputedStyle(e),l=+i.opacity,s=parseFloat(i.height);return{delay:t,duration:n,easing:o,css:f=>`opacity: ${Math.min(f*20,1)*l}; max-height: ${f*s}px;`}},W=[];function $e(e,t=p){let n;const o=new Set;function i(f){if(de(e,f)&&(e=f,n)){const r=!W.length;for(const u of o)u[1](),W.push(u,e);if(r){for(let u=0;u<W.length;u+=2)W[u][0](W[u+1]);W.length=0}}}function l(f){i(f(e))}function s(f,r=p){const u=[f,r];return o.add(u),o.size===1&&(n=t(i)||p),f(e),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:i,update:l,subscribe:s}}const N=$e(0),$=$e(null);function et(e,t,n){const o=e.slice();return o[18]=t[n],o}function tt(e){let t,n,o,i,l,s,f=e[0],r=[];for(let d=0;d<f.length;d+=1)r[d]=ot(et(e,f,d));const u=d=>A(r[d],1,1,()=>{r[d]=null});return{c(){t=Y("div");for(let d=0;d<r.length;d+=1)r[d].c();z(t,"class","bitoc-nav")},m(d,a){I(d,t,a);for(let c=0;c<r.length;c+=1)r[c].m(t,null);i=!0,l||(s=[ne(t,"introstart",e[10]),ne(t,"introend",e[11]),ne(t,"outrostart",e[12]),ne(t,"outroend",e[13])],l=!0)},p(d,a){if(a&495){f=d[0];let c;for(c=0;c<f.length;c+=1){const g=et(d,f,c);r[c]?(r[c].p(g,a),k(r[c],1)):(r[c]=ot(g),r[c].c(),k(r[c],1),r[c].m(t,null))}for(we(),c=f.length;c<r.length;c+=1)u(c);pe()}},i(d){if(!i){for(let a=0;a<f.length;a+=1)k(r[a]);B(()=>{o&&o.end(1),n=Lt(t,Ze,{}),n.start()}),i=!0}},o(d){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)A(r[a]);n&&n.invalidate(),o=Dt(t,Ze,{}),i=!1},d(d){d&&M(t),ht(r,d),d&&o&&o.end(),l=!1,H(s)}}}function nt(e){let t,n;return t=new it({props:{nodes:e[18].nodes,parent:e[18],scrollOffset:e[6],onNav:e[5],scrollElement:e[1],scrollDuration:e[2],collapsedLevel:e[3],transitionEnd:e[7]}}),{c(){Be(t.$$.fragment)},m(o,i){Se(t,o,i),n=!0},p(o,i){const l={};i&1&&(l.nodes=o[18].nodes),i&1&&(l.parent=o[18]),i&64&&(l.scrollOffset=o[6]),i&32&&(l.onNav=o[5]),i&2&&(l.scrollElement=o[1]),i&4&&(l.scrollDuration=o[2]),i&8&&(l.collapsedLevel=o[3]),i&128&&(l.transitionEnd=o[7]),t.$set(l)},i(o){n||(k(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){Oe(t,o)}}}function ot(e){let t,n=e[18].title+"",o,i,l,s,f,r,u,d,a,c=e[18].nodes&&e[18].nodes.length&&nt(e);return{c(){t=Y("a"),o=_e(n),f=gt(),c&&c.c(),r=Me(),z(t,"href",i="#"+e[18].id),z(t,"class",l=e[18].class),ze(t,"active",e[8]===e[18])},m(g,_){I(g,t,_),he(t,o),I(g,f,_),c&&c.m(g,_),I(g,r,_),u=!0,d||(a=at(s=e[9].call(null,t,e[18])),d=!0)},p(g,_){e=g,(!u||_&1)&&n!==(n=e[18].title+"")&&bt(o,n),(!u||_&1&&i!==(i="#"+e[18].id))&&z(t,"href",i),(!u||_&1&&l!==(l=e[18].class))&&z(t,"class",l),s&&G(s.update)&&_&1&&s.update.call(null,e[18]),_&257&&ze(t,"active",e[8]===e[18]),e[18].nodes&&e[18].nodes.length?c?(c.p(e,_),_&1&&k(c,1)):(c=nt(e),c.c(),k(c,1),c.m(r.parentNode,r)):c&&(we(),A(c,1,1,()=>{c=null}),pe())},i(g){u||(k(c),u=!0)},o(g){A(c),u=!1},d(g){g&&M(t),g&&M(f),c&&c.d(g),g&&M(r),d=!1,a()}}}function jt(e){let t=!e[14](e[8],e[4]),n,o,i=t&&tt(e);return{c(){i&&i.c(),n=Me()},m(l,s){i&&i.m(l,s),I(l,n,s),o=!0},p(l,[s]){s&272&&(t=!l[14](l[8],l[4])),t?i?(i.p(l,s),s&272&&k(i,1)):(i=tt(l),i.c(),k(i,1),i.m(n.parentNode,n)):i&&(we(),A(i,1,1,()=>{i=null}),pe())},i(l){o||(k(i),o=!0)},o(l){A(i),o=!1},d(l){i&&i.d(l),l&&M(n)}}}function qt(e,t,n){let o,i;te(e,N,h=>n(16,o=h)),te(e,$,h=>n(8,i=h));let{nodes:l=[]}=t,{scrollElement:s}=t,{scrollDuration:f}=t,{collapsedLevel:r}=t,{parent:u=null}=t,{onNav:d=null}=t,{scrollOffset:a=0}=t,{transitionStart:c=null}=t,{transitionEnd:g=null}=t;const _=function(h,y){y.element=h;let S=y;const K=function(T){L($,i=S,i);let R=s;s.scrollingElement&&(R=s.scrollingElement);const V=S.y-a;L(N,o=o+1,o),Xe(R,V,f,function(){if(typeof d!="function"){Ue(R,V,()=>{L(N,o=o-1,o)});return}d(T.target,S,function(){Ue(R,V,()=>{L(N,o=o-1,o)})})})};return h.addEventListener(Ve,K),{update(T){S=T,S.element=h},destory(){y.element=null,S=null,h.removeEventListener(Ve,K)}}},E=h=>{L(N,o=o+1,o),v(c,void 0,h)},b=h=>{L(N,o=o-1,o),v(g,void 0,h)},O=h=>{L(N,o=o+1,o),v(c,void 0,h)},C=h=>{L(N,o=o-1,o),v(g,void 0,h)},D=function(h,y){return h&&y?h===y?!0:D(h.parent,y):!1},Le=function(h,y){return!h||!y?!1:y.level+1>r&&!D(h,y)};return e.$$set=h=>{"nodes"in h&&n(0,l=h.nodes),"scrollElement"in h&&n(1,s=h.scrollElement),"scrollDuration"in h&&n(2,f=h.scrollDuration),"collapsedLevel"in h&&n(3,r=h.collapsedLevel),"parent"in h&&n(4,u=h.parent),"onNav"in h&&n(5,d=h.onNav),"scrollOffset"in h&&n(6,a=h.scrollOffset),"transitionStart"in h&&n(15,c=h.transitionStart),"transitionEnd"in h&&n(7,g=h.transitionEnd)},[l,s,f,r,u,d,a,g,i,_,E,b,O,C,Le,c]}class it extends Ke{constructor(t){super(),We(this,t,qt,jt,de,{nodes:0,scrollElement:1,scrollDuration:2,collapsedLevel:3,parent:4,onNav:5,scrollOffset:6,transitionStart:15,transitionEnd:7})}}function It(e){dt(e,"svelte-f3ug8b",'.bitoc.svelte-f3ug8b.svelte-f3ug8b,.bitoc.svelte-f3ug8b .svelte-f3ug8b{box-sizing:border-box}.bitoc-fixed{position:fixed !important}.bitoc.svelte-f3ug8b.svelte-f3ug8b{width:100%;position:relative;overflow-y:auto;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scroll-behavior:smooth}.bitoc.svelte-f3ug8b.svelte-f3ug8b::-webkit-scrollbar{width:0 !important}.bitoc-nav a{display:block;padding:0.2rem 1.7rem;font-size:0.9rem;text-decoration:none;color:#555;position:relative;transition:all 0.25s}.bitoc-nav{overflow:hidden;transition:max-height 0.25s}.bitoc-nav a:before{content:" ";height:0.25rem;width:0.25rem;background:#555;position:absolute;top:0.72rem;left:1rem}.bitoc-nav a:hover, .bitoc-nav a.active{color:#009a61}.bitoc-nav a.active::before, .bitoc-nav a:hover:before{background:#009a61}.bitoc-nav a.bitoc-ml-2{margin-left:1rem !important}.bitoc-nav a.bitoc-ml-3{margin-left:2rem !important}.bitoc-nav a.bitoc-ml-4{margin-left:3rem !important}.bitoc-nav a.bitoc-ml-5{margin-left:4rem !important}.bitoc-nav a.bitoc-ml-6{margin-left:5rem !important}')}function Yt(e){let t,n,o,i;return o=new it({props:{scrollOffset:e[2],collapsedLevel:e[0],scrollDuration:e[1],nodes:e[3],scrollElement:e[5],transitionEnd:e[6]}}),{c(){t=Y("main"),n=Y("div"),Be(o.$$.fragment),z(n,"class","bitoc-navs svelte-f3ug8b"),z(t,"class","bitoc svelte-f3ug8b")},m(l,s){I(l,t,s),he(t,n),Se(o,n,null),e[20](t),i=!0},p(l,s){const f={};s[0]&4&&(f.scrollOffset=l[2]),s[0]&1&&(f.collapsedLevel=l[0]),s[0]&2&&(f.scrollDuration=l[1]),s[0]&8&&(f.nodes=l[3]),o.$set(f)},i(l){i||(k(o.$$.fragment,l),i=!0)},o(l){A(o.$$.fragment,l),i=!1},d(l){l&&M(t),Oe(o),e[20](null)}}}function Bt(e,t,n){let o,i;te(e,N,m=>n(24,o=m)),te(e,$,m=>n(25,i=m));let{contentElement:l}=t,{scrollElement:s}=t,{fixedElement:f}=t,{headingSelector:r}=t,{collapsedLevel:u=3}=t,{idPrefix:d=""}=t,{levelClassPrefix:a=""}=t,{scrollDuration:c=200}=t,{fixedOffset:g=0}=t,{fixedClassName:_="bitoc-fixed"}=t,{scrollOffset:E=0}=t,{beforeFixed:b=null}=t,{afterFixed:O=null}=t;const C=function(){V(),ee()},D=function(){return h.length===0},Le=function(){K=Z(f||S,document.documentElement).y,ee()};let h=[],y={},S=null,K=0,T=Qe(s),R=[];const V=function(){const m=l.querySelectorAll(r||"h1, h2, h3, h4, h5, h6"),x=Pt(m,d,a,T);n(3,h=x.nodes),y=x.offsets,R=Object.keys(y).map(Number);const w=lt();y[w]&&L($,i=y[w],i)},lt=function(){const m=ue(T);return R.find(x=>x>=m)},Vt=function(m){if(D())return;const x=lt(),w=y[x];if(x!==void 0&&w){L($,i=w,i);const F=w.element;Gt(F,m)}else v(m)},Gt=function(m,x){if(D()){v(x);return}let w=S;if(m&&w){let F=Z(m,w).y;const De=w.offsetHeight,rt=w.scrollHeight-De,ct=De/2;F<=ct?F=0:F-De>rt?F=rt:F=F-ct,Xe(w,F,c,()=>{v(x)})}else v(x)},Jt=function(){if(!D()&&g!==!1&&_&&fe(T)){const m=f||S,x=ue(document);let w=g;if(w||(w=K),x>=w){if(!m.classList.contains(_)){if(v(b,void 0,!0)===!1)return;m.classList.add(_),v(O,void 0,!0)}}else if(m.classList.contains(_)){if(v(b,void 0,!1)===!1)return;m.classList.remove(_),v(O,void 0,!1)}}},st=function(){Jt(),o===0&&Vt()},ee=function(){Ut()},Qt=()=>{st()},Ut=Ht(st,16);St(()=>(K=Z(f||S,document.documentElement).y,ee(),T.addEventListener("scroll",ee),()=>{T.removeEventListener("scroll",ee)}));function Xt(m){ve[m?"unshift":"push"](()=>{S=m,n(4,S)})}return e.$$set=m=>{"contentElement"in m&&n(7,l=m.contentElement),"scrollElement"in m&&n(8,s=m.scrollElement),"fixedElement"in m&&n(9,f=m.fixedElement),"headingSelector"in m&&n(10,r=m.headingSelector),"collapsedLevel"in m&&n(0,u=m.collapsedLevel),"idPrefix"in m&&n(11,d=m.idPrefix),"levelClassPrefix"in m&&n(12,a=m.levelClassPrefix),"scrollDuration"in m&&n(1,c=m.scrollDuration),"fixedOffset"in m&&n(13,g=m.fixedOffset),"fixedClassName"in m&&n(14,_=m.fixedClassName),"scrollOffset"in m&&n(2,E=m.scrollOffset),"beforeFixed"in m&&n(15,b=m.beforeFixed),"afterFixed"in m&&n(16,O=m.afterFixed)},V(),[u,c,E,h,S,T,Qt,l,s,f,r,d,a,g,_,b,O,C,D,Le,Xt]}class Wt extends Ke{constructor(t){super(),We(this,t,Bt,Yt,de,{contentElement:7,scrollElement:8,fixedElement:9,headingSelector:10,collapsedLevel:0,idPrefix:11,levelClassPrefix:12,scrollDuration:1,fixedOffset:13,fixedClassName:14,scrollOffset:2,beforeFixed:15,afterFixed:16,reset:17,isEmpty:18,syncScroll:19},It,[-1,-1])}get reset(){return this.$$.ctx[17]}get isEmpty(){return this.$$.ctx[18]}get syncScroll(){return this.$$.ctx[19]}}const ae=function(e,t,n,o){if(!(!e&&o)){if(typeof e=="string"&&(e=document.querySelector(e)),!(e instanceof HTMLElement))if(n)e=n;else throw new Error(`"${t}"is an invalid selector or non-DOM node`);return e}};class Kt{constructor(t,n){const{contentSelector:o,scrollSelector:i,fixedSelector:l,headingSelector:s,collapsedLevel:f,idPrefix:r,levelClassPrefix:u,scrollDuration:d,fixedOffset:a,fixedClassName:c,scrollOffset:g,beforeFixed:_,afterFixed:E}=n||{};t=ae(t,"mount");const b=ae(o,"contentSelector",document.body),O=ae(i,"scrollSelector",document.body),C=ae(l,"fixedSelector",null,!0);this.toc=new Wt({target:t,props:{contentElement:b,scrollElement:O,fixedElement:C,headingSelector:s,collapsedLevel:Math.max(1,Math.min(f,6))||3,idPrefix:r,levelClassPrefix:u,scrollDuration:d,fixedOffset:a,fixedClassName:c,scrollOffset:g,beforeFixed:_,afterFixed:E}})}reset(){this.toc.reset()}isEmpty(){return this.toc.isEmpty()}syncScroll(){this.toc.syncScroll()}}return Kt});
