var hn=Object.defineProperty,gn=Object.defineProperties;var bn=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var _n=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable;var Et=(_,E,L)=>E in _?hn(_,E,{enumerable:!0,configurable:!0,writable:!0,value:L}):_[E]=L,De=(_,E)=>{for(var L in E||(E={}))_n.call(E,L)&&Et(_,L,E[L]);if(pt)for(var L of pt(E))vn.call(E,L)&&Et(_,L,E[L]);return _},Te=(_,E)=>gn(_,bn(E));(function(_,E){typeof exports=="object"&&typeof module!="undefined"?module.exports=E():typeof define=="function"&&define.amd?define(E):(_=typeof globalThis!="undefined"?globalThis:_||self,_.TocHelper=E())})(this,function(){"use strict";function _(){}const E=e=>e;function L(e){return e()}function He(){return Object.create(null)}function T(e){e.forEach(L)}function R(e){return typeof e=="function"}function ae(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function wt(e){return Object.keys(e).length===0}function Ce(e,...t){if(e==null)return _;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function V(e,t,n){e.$$.on_destroy.push(Ce(t,n))}function I(e,t,n){return e.set(n),t}function kt(e){return e&&R(e.destroy)?e.destroy:_}const Ae=typeof window!="undefined";let Fe=Ae?()=>window.performance.now():()=>Date.now(),de=Ae?e=>requestAnimationFrame(e):_;const j=new Set;function Pe(e){j.forEach(t=>{t.c(e)||(j.delete(t),t.f())}),j.size!==0&&de(Pe)}function ze(e){let t;return j.size===0&&de(Pe),{promise:new Promise(n=>{j.add(t={c:e,f:n})}),abort(){j.delete(t)}}}function G(e,t){e.appendChild(t)}function xt(e,t,n){const o=me(e);if(!o.getElementById(t)){const l=P("style");l.id=t,l.textContent=n,Me(o,l)}}function me(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ot(e){const t=P("style");return Me(me(e),t),t.sheet}function Me(e,t){G(e.head||e,t)}function q(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode.removeChild(e)}function Lt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function he(e){return document.createTextNode(e)}function Re(){return he(" ")}function Ie(){return he("")}function je(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function D(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function St(e){return Array.from(e.childNodes)}function Nt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function qe(e,t,n){e.classList[n?"add":"remove"](t)}function Dt(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}const ne=new Map;let oe=0;function Tt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ht(e,t){const n={stylesheet:Ot(t),rules:{}};return ne.set(e,n),n}function Be(e,t,n,o,l,i,r,c=0){const s=16.666/o;let f=`{
`;for(let w=0;w<=1;w+=s){const g=t+(n-t)*i(w);f+=w*100+`%{${r(g,1-g)}}
`}const d=f+`100% {${r(n,1-n)}}
}`,a=`__svelte_${Tt(d)}_${c}`,u=me(e),{stylesheet:h,rules:b}=ne.get(u)||Ht(u,e);b[a]||(b[a]=!0,h.insertRule(`@keyframes ${a} ${d}`,h.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${a} ${o}ms linear ${l}ms 1 both`,oe+=1,a}function ge(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?i=>i.indexOf(t)<0:i=>i.indexOf("__svelte")===-1),l=n.length-o.length;l&&(e.style.animation=o.join(", "),oe-=l,oe||Ct())}function Ct(){de(()=>{oe||(ne.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),ne.clear())})}let J;function Q(e){J=e}function At(){if(!J)throw new Error("Function called outside component initialization");return J}function Ft(e){At().$$.on_mount.push(e)}const U=[],be=[],le=[],We=[],Pt=Promise.resolve();let _e=!1;function zt(){_e||(_e=!0,Pt.then(Ye))}function B(e){le.push(e)}const ve=new Set;let ie=0;function Ye(){const e=J;do{for(;ie<U.length;){const t=U[ie];ie++,Q(t),Mt(t.$$)}for(Q(null),U.length=0,ie=0;be.length;)be.pop()();for(let t=0;t<le.length;t+=1){const n=le[t];ve.has(n)||(ve.add(n),n())}le.length=0}while(U.length);for(;We.length;)We.pop()();_e=!1,ve.clear(),Q(e)}function Mt(e){if(e.fragment!==null){e.update(),T(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}let X;function Ke(){return X||(X=Promise.resolve(),X.then(()=>{X=null})),X}function se(e,t,n){e.dispatchEvent(Dt(`${t?"intro":"outro"}${n}`))}const re=new Set;let H;function ye(){H={r:0,c:[],p:H}}function pe(){H.r||T(H.c),H=H.p}function S(e,t){e&&e.i&&(re.delete(e),e.i(t))}function C(e,t,n,o){if(e&&e.o){if(re.has(e))return;re.add(e),H.c.push(()=>{re.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const Ve={duration:0};function Rt(e,t,n){let o=t(e,n),l=!1,i,r,c=0;function s(){i&&ge(e,i)}function f(){const{delay:a=0,duration:u=300,easing:h=E,tick:b=_,css:v}=o||Ve;v&&(i=Be(e,0,1,u,a,h,v,c++)),b(0,1);const w=Fe()+a,g=w+u;r&&r.abort(),l=!0,B(()=>se(e,!0,"start")),r=ze(y=>{if(l){if(y>=g)return b(1,0),se(e,!0,"end"),s(),l=!1;if(y>=w){const x=h((y-w)/u);b(x,1-x)}}return l})}let d=!1;return{start(){d||(d=!0,ge(e),R(o)?(o=o(),Ke().then(f)):f())},invalidate(){d=!1},end(){l&&(s(),l=!1)}}}function It(e,t,n){let o=t(e,n),l=!0,i;const r=H;r.r+=1;function c(){const{delay:s=0,duration:f=300,easing:d=E,tick:a=_,css:u}=o||Ve;u&&(i=Be(e,1,0,f,s,d,u));const h=Fe()+s,b=h+f;B(()=>se(e,!1,"start")),ze(v=>{if(l){if(v>=b)return a(0,1),se(e,!1,"end"),--r.r||T(r.c),!1;if(v>=h){const w=d((v-h)/f);a(1-w,w)}}return l})}return R(o)?Ke().then(()=>{o=o(),c()}):c(),{end(s){s&&o.tick&&o.tick(1,0),l&&(i&&ge(e,i),l=!1)}}}function Ge(e){e&&e.c()}function Ee(e,t,n,o){const{fragment:l,on_mount:i,on_destroy:r,after_update:c}=e.$$;l&&l.m(t,n),o||B(()=>{const s=i.map(L).filter(R);r?r.push(...s):T(s),e.$$.on_mount=[]}),c.forEach(B)}function we(e,t){const n=e.$$;n.fragment!==null&&(T(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(e,t){e.$$.dirty[0]===-1&&(U.push(e),zt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Je(e,t,n,o,l,i,r,c=[-1]){const s=J;Q(e);const f=e.$$={fragment:null,ctx:null,props:i,update:_,not_equal:l,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:He(),dirty:c,skip_bound:!1,root:t.target||s.$$.root};r&&r(f.root);let d=!1;if(f.ctx=n?n(e,t.props||{},(a,u,...h)=>{const b=h.length?h[0]:u;return f.ctx&&l(f.ctx[a],f.ctx[a]=b)&&(!f.skip_bound&&f.bound[a]&&f.bound[a](b),d&&jt(e,a)),u}):[],f.update(),d=!0,T(f.before_update),f.fragment=o?o(f.ctx):!1,t.target){if(t.hydrate){const a=St(t.target);f.fragment&&f.fragment.l(a),a.forEach(F)}else f.fragment&&f.fragment.c();t.intro&&S(e.$$.fragment),Ee(e,t.target,t.anchor,t.customElement),Ye()}Q(s)}class Qe{$destroy(){we(this,1),this.$destroy=_}$on(t,n){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(t){this.$$set&&!wt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ke=window.requestAnimationFrame,Ue=window.cancelAnimationFrame,ce=function(e,...t){typeof e=="function"&&e.call(...t)},qt=/(^\s*)|(\s*$)/g,Z=function(e){return e===document.body||e===document},xe=/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent),Bt=xe?"touchstart":"mouseenter",Wt=xe?"touchend":"mouseleave",Yt=xe?"touchstart":"click",Kt=/^h(\d)$/i;let Oe=0;const Vt=(e,t,n,o,l,i,r)=>{l=l||"bitoc-heading-",i=i||"bitoc-ml-";let c=e.getAttribute("id");Oe=Oe+1;let s=c;c||(c=l+Oe);const f=(e.textContent||"").replace(qt,"");return{class:i+t,title:f,parent:o,target:e,level:t,oriLevel:n,id:c,oriId:s,y:$(e,r).y}},Xe=function(e,t){return e?e.level===t?e.parent:e.level===t-1?e:Xe(e.parent,t):null},Gt=(e,t,n,o)=>{if(!e||!e.length)return{nodes:[],offsets:{}};const l={},i=[];let r=null;return e.forEach(c=>{let s=null;const f=Kt.exec(c.nodeName);f?s=f[1]:s=c.getAttribute("data-level"),s=parseInt(s),s=Math.max(1,Math.min(s,6))||6;let d=s,a=null;r?r.level>=s?(a=Xe(r.parent,s),d=a?a.level+1:1):(d=r.level+1,a=r):(d=1,a=null);const u=Vt(c,d,s,a,t,n,o);a?a.nodes?a.nodes.push(u):a.nodes=[u]:i.push(u),r=u,l[u.y]=u}),{nodes:i,offsets:l}},Ze=function(e,t,n){let o,l=Date.now();const i=()=>{if(Date.now()-l>=t){Ue(o),ce(e,this,o),o=null;return}o=ke(i),ce(n,void 0,o)};return i(),o},$e=function(e){Ue(e)},Jt=function(e,t=16){let n;const o=function(){const l=this,i=arguments;n&&$e(n),n=Ze(()=>e.apply(l,i),t,r=>n=r)};return o.cancel=function(){$e(n),n=null},o},Qt=function(e,t=16){let n=null;return function(){const o=this,l=arguments,i=Date.now();(!n||i-n>t)&&(e.apply(o,l),n=i)}},Ut=function(e,t,n){(e<=0||isNaN(e))&&(e=500);const o=Date.now();let l=!0;return ke(function i(){const r=(Date.now()-o)/e;ce(t,void 0,r),r>=1&&(t(1),l=!1,ce(n,void 0,1)),l&&ke(i)}),function(){l=!1}},et=function(e){return e.scrollHeight>e.clientHeight},$=function(e,t){let n=t;(!t||Z(t))&&(n=document);let o=e.offsetTop||0,l=e.offsetLeft||0;const i=e.offsetParent;if(Z(e)||!i)return{x:l,y:o};if(i===n.offsetParent){const r=n.offsetTop||0,c=n.offsetLeft||0;return{x:l-c,y:o-r}}if(i!==n){const r=$(i);o+=r.y,l+=r.x}return{x:l,y:o}},Le=function(e){return e===window?e.pageYOffset:e===document?document.scrollingElement.scrollTop:e.scrollTop},Xt=function(e,t,n){if(t&&!n)return window.getComputedStyle(e).getPropertyValue(t);e.style[t]=n},tt=function(e){return Z(e)?document:!e||Z(e)||et(e)?e:Xt(e,"position")==="fixed"||!e.parentElement?document:tt(e.parentElement)},nt=function(e,t,n=200,o){if(et(e)){const l=Le(e),i=t-l;Ut(n,r=>{e.scrollTo({left:0,top:l+r*i,behavior:"smooth"})},o)}else typeof o=="function"&&o()};function Zt(e){const t=e-1;return t*t*t+1}const ot=function(e,{delay:t=0,duration:n=150,easing:o=Zt}={}){const l=getComputedStyle(e),i=+l.opacity,r=parseFloat(l.height);return{delay:t,duration:n,easing:o,css:c=>`overflow: hidden;opacity: ${Math.min(c*20,1)*i};height: ${c*r}px;`}},W=[];function $t(e,t){return{subscribe:Se(e,t).subscribe}}function Se(e,t=_){let n;const o=new Set;function l(c){if(ae(e,c)&&(e=c,n)){const s=!W.length;for(const f of o)f[1](),W.push(f,e);if(s){for(let f=0;f<W.length;f+=2)W[f][0](W[f+1]);W.length=0}}}function i(c){l(c(e))}function r(c,s=_){const f=[c,s];return o.add(f),o.size===1&&(n=t(l)||_),c(e),()=>{o.delete(f),o.size===0&&(n(),n=null)}}return{set:l,update:i,subscribe:r}}function en(e,t,n){const o=!Array.isArray(e),l=o?[e]:e,i=t.length<2;return $t(n,r=>{let c=!1;const s=[];let f=0,d=_;const a=()=>{if(f)return;d();const h=t(o?s[0]:s,r);i?r(h):d=R(h)?h:_},u=l.map((h,b)=>Ce(h,v=>{s[b]=v,f&=~(1<<b),c&&a()},()=>{f|=1<<b}));return c=!0,a(),function(){T(u),d()}})}const ee=Se({node:null,el:null,hoverd:null}),lt=Se(!1),N={subscribe:ee.subscribe,set({node:e,el:t,hoverd:n}){ee.set({node:e,el:t,hoverd:n})},unHoverd(){ee.update(e=>Te(De({},e),{hoverd:null}))},hoverd(e){ee.update(t=>Te(De({},t),{hoverd:e}))}},tn=en(ee,e=>{const t=e.hoverd||e.el;return t?`top: ${t.offsetTop||0}px; height: ${t.offsetHeight||0}px`:""}),fe={subscribe:lt.subscribe,set(e){lt.set(e)}};function it(e,t,n){const o=e.slice();return o[14]=t[n],o}function st(e){let t,n,o,l,i,r,c=e[0],s=[];for(let d=0;d<c.length;d+=1)s[d]=ct(it(e,c,d));const f=d=>C(s[d],1,1,()=>{s[d]=null});return{c(){t=P("div");for(let d=0;d<s.length;d+=1)s[d].c();D(t,"class","bitoc-nav")},m(d,a){q(d,t,a);for(let u=0;u<s.length;u+=1)s[u].m(t,null);l=!0,i||(r=[je(t,"introend",e[9]),je(t,"outroend",e[10])],i=!0)},p(d,a){if(a&239){c=d[0];let u;for(u=0;u<c.length;u+=1){const h=it(d,c,u);s[u]?(s[u].p(h,a),S(s[u],1)):(s[u]=ct(h),s[u].c(),S(s[u],1),s[u].m(t,null))}for(ye(),u=c.length;u<s.length;u+=1)f(u);pe()}},i(d){if(!l){for(let a=0;a<c.length;a+=1)S(s[a]);B(()=>{o&&o.end(1),n=Rt(t,ot,{}),n.start()}),l=!0}},o(d){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)C(s[a]);n&&n.invalidate(),o=It(t,ot,{}),l=!1},d(d){d&&F(t),Lt(s,d),d&&o&&o.end(),i=!1,T(r)}}}function rt(e){let t,n;return t=new ft({props:{nodes:e[14].nodes,parent:e[14],scrollOffset:e[6],onNav:e[5],scrollElement:e[1],scrollDuration:e[2],collapsedLevel:e[3]}}),{c(){Ge(t.$$.fragment)},m(o,l){Ee(t,o,l),n=!0},p(o,l){const i={};l&1&&(i.nodes=o[14].nodes),l&1&&(i.parent=o[14]),l&64&&(i.scrollOffset=o[6]),l&32&&(i.onNav=o[5]),l&2&&(i.scrollElement=o[1]),l&4&&(i.scrollDuration=o[2]),l&8&&(i.collapsedLevel=o[3]),t.$set(i)},i(o){n||(S(t.$$.fragment,o),n=!0)},o(o){C(t.$$.fragment,o),n=!1},d(o){we(t,o)}}}function ct(e){let t,n=e[14].title+"",o,l,i,r,c,s,f,d,a,u=e[14].nodes&&e[14].nodes.length&&rt(e);return{c(){t=P("a"),o=he(n),c=Re(),u&&u.c(),s=Ie(),D(t,"href",l="#"+e[14].id),D(t,"class",i=e[14].class),qe(t,"active",e[7].node===e[14])},m(h,b){q(h,t,b),G(t,o),q(h,c,b),u&&u.m(h,b),q(h,s,b),f=!0,d||(a=kt(r=e[8].call(null,t,e[14])),d=!0)},p(h,b){e=h,(!f||b&1)&&n!==(n=e[14].title+"")&&Nt(o,n),(!f||b&1&&l!==(l="#"+e[14].id))&&D(t,"href",l),(!f||b&1&&i!==(i=e[14].class))&&D(t,"class",i),r&&R(r.update)&&b&1&&r.update.call(null,e[14]),b&129&&qe(t,"active",e[7].node===e[14]),e[14].nodes&&e[14].nodes.length?u?(u.p(e,b),b&1&&S(u,1)):(u=rt(e),u.c(),S(u,1),u.m(s.parentNode,s)):u&&(ye(),C(u,1,1,()=>{u=null}),pe())},i(h){f||(S(u),f=!0)},o(h){C(u),f=!1},d(h){h&&F(t),h&&F(c),u&&u.d(h),h&&F(s),d=!1,a()}}}function nn(e){let t=!e[11](e[7].node,e[4]),n,o,l=t&&st(e);return{c(){l&&l.c(),n=Ie()},m(i,r){l&&l.m(i,r),q(i,n,r),o=!0},p(i,[r]){r&144&&(t=!i[11](i[7].node,i[4])),t?l?(l.p(i,r),r&144&&S(l,1)):(l=st(i),l.c(),S(l,1),l.m(n.parentNode,n)):l&&(ye(),C(l,1,1,()=>{l=null}),pe())},i(i){o||(S(l),o=!0)},o(i){C(l),o=!1},d(i){l&&l.d(i),i&&F(n)}}}function on(e,t,n){let o,l;V(e,N,g=>n(7,o=g)),V(e,fe,g=>n(12,l=g));let{nodes:i=[]}=t,{scrollElement:r}=t,{scrollDuration:c}=t,{collapsedLevel:s}=t,{parent:f=null}=t,{onNav:d=null}=t,{scrollOffset:a=0}=t;const u=function(g,y){y.element=g,o.node===y&&I(N,o={node:y,el:g,hoverd:null},o);let x=y;const A=function(O){N.hoverd(O.target)},te=function(O){N.unHoverd()},z=function(O){I(N,o={node:x,el:O.target,hoverd:null},o);let Y=r;r.scrollingElement&&(Y=r.scrollingElement),I(fe,l=!0,l),nt(Y,x.y-a,c,function(){typeof d=="function"&&d(O.target,x),Ze(()=>{I(fe,l=!1,l)},16)})};return g.addEventListener(Bt,A),g.addEventListener(Wt,te),g.addEventListener(Yt,z),{update(O){x=O,x.element=g}}},h=function(){N.hoverd(o.el)},b=function(){N.hoverd(o.el)},v=function(g,y){return g&&y?g.id===y.id?!0:v(g.parent,y):!1},w=function(g,y){return!g||!y?!1:y.level+1>s&&!v(g,y)};return e.$$set=g=>{"nodes"in g&&n(0,i=g.nodes),"scrollElement"in g&&n(1,r=g.scrollElement),"scrollDuration"in g&&n(2,c=g.scrollDuration),"collapsedLevel"in g&&n(3,s=g.collapsedLevel),"parent"in g&&n(4,f=g.parent),"onNav"in g&&n(5,d=g.onNav),"scrollOffset"in g&&n(6,a=g.scrollOffset)},[i,r,c,s,f,d,a,o,u,h,b,w]}class ft extends Qe{constructor(t){super();Je(this,t,on,nn,ae,{nodes:0,scrollElement:1,scrollDuration:2,collapsedLevel:3,parent:4,onNav:5,scrollOffset:6})}}function ln(e){xt(e,"svelte-10e3kft",`.bitoc.svelte-10e3kft.svelte-10e3kft,.bitoc.svelte-10e3kft .svelte-10e3kft{box-sizing:border-box}.bitoc-fixed{position:fixed !important}.bitoc.svelte-10e3kft.svelte-10e3kft{width:100%;position:relative;overflow-y:auto;-ms-overflow-style:none;overflow:-moz-scrollbars-none}.bitoc.svelte-10e3kft.svelte-10e3kft::-webkit-scrollbar{width:0 !important}.bitoc-hightlight{width:100%;background:#eee;position:absolute;left:0;top:0;height:12px;border-left:3px solid #009a61;transition:top 0.25s cubic-bezier(0.075, 0.82, 0.165, 1),
      height 0.25s cubic-bezier(0.075, 0.82, 0.165, 1)}.bitoc-nav a{display:block;padding:0.2rem 1.7rem;font-size:0.9rem;text-decoration:none;color:#555;position:relative;transition:all 0.25s}.bitoc-nav{transition:max-height 0.25s}.bitoc-nav.is-collapsed{max-height:0;overflow:hidden}.bitoc-nav a:before{content:" ";height:0.25rem;width:0.25rem;background:#555;position:absolute;top:0.72rem;left:1rem}.bitoc-nav a:hover, .bitoc-nav a.active{color:#009a61}.bitoc-nav a.active::before, .bitoc-nav a:hover:before{background:#009a61}.bitoc-nav a.bitoc-ml-2{margin-left:1rem !important}.bitoc-nav a.bitoc-ml-3{margin-left:2rem !important}.bitoc-nav a.bitoc-ml-4{margin-left:3rem !important}.bitoc-nav a.bitoc-ml-5{margin-left:4rem !important}.bitoc-nav a.bitoc-ml-6{margin-left:5rem !important}`)}function sn(e){let t,n,o,l,i,r;return i=new ft({props:{onNav:e[7],scrollOffset:e[2],collapsedLevel:e[0],scrollDuration:e[1],nodes:e[3],scrollElement:e[6]}}),{c(){t=P("main"),n=P("div"),o=Re(),l=P("div"),Ge(i.$$.fragment),D(n,"class","bitoc-hightlight svelte-10e3kft"),D(n,"style",e[5]),D(l,"class","bitoc-navs svelte-10e3kft"),D(t,"class","bitoc svelte-10e3kft")},m(c,s){q(c,t,s),G(t,n),G(t,o),G(t,l),Ee(i,l,null),e[20](t),r=!0},p(c,s){(!r||s[0]&32)&&D(n,"style",c[5]);const f={};s[0]&4&&(f.scrollOffset=c[2]),s[0]&1&&(f.collapsedLevel=c[0]),s[0]&2&&(f.scrollDuration=c[1]),s[0]&8&&(f.nodes=c[3]),i.$set(f)},i(c){r||(S(i.$$.fragment,c),r=!0)},o(c){C(i.$$.fragment,c),r=!1},d(c){c&&F(t),we(i),e[20](null)}}}function rn(e,t,n){let o,l,i;V(e,N,m=>n(24,o=m)),V(e,fe,m=>n(25,l=m)),V(e,tn,m=>n(5,i=m));let{contentElement:r}=t,{scrollElement:c}=t,{fixedElement:s}=t,{headingSelector:f="h1, h2, h3, h4, h5, h6"}=t,{collapsedLevel:d=3}=t,{idPrefix:a=""}=t,{levelClassPrefix:u=""}=t,{scrollDuration:h=200}=t,{fixedOffset:b=0}=t,{fixedClassName:v="bitoc-fixed"}=t,{scrollOffset:w=0}=t;const g=function(){at()},y=function(){return te.length===0};let{beforeFixed:x=null}=t,{afterFixed:A=null}=t,te=[],z={},O=null,Y=0,K=tt(c),ut=[];const at=function(){const m=r.querySelectorAll(f),p=Gt(m,a,u,K);n(3,te=p.nodes),z=p.offsets,ut=Object.keys(z);const k=dt();z[k]&&I(N,o={node:z[k],el:null,hoverd:null},o)},dt=function(){const m=Le(K);return ut.find(p=>p>=m)},un=function(){if(y())return;const m=dt(),p=z[m];if(m!==void 0&&p){const k=p.element;I(N,o={node:p,el:k,hoverd:null},o),bt.cancel(),bt(k)}},mt=function(m){if(y())return;let p=O;if(m&&p){let k=$(m,p).y;const M=p.offsetHeight,vt=p.scrollHeight-M,yt=M/2;k<=yt?k=0:k-M>vt?k=vt:k=k-yt,nt(p,k,h)}},ht=function(){if(!y()&&b!==!1&&Z(K)){const m=s||O,p=Le(document.scrollingElement);let k=b;if(isNaN(k)&&(k=Y),p>=k){if(!m.classList.contains(v)&&(typeof x=="function"&&x(!0)===!1||(m.classList.add(v),typeof A=="function"&&A(!0)===!1)))return}else if(m.classList.contains(v)&&(typeof x=="function"&&x(!1)===!1||(m.classList.remove(v),typeof A=="function"&&A(!1)===!1)))return}},an=function(m,p){ht(),mt(m)},Ne=function(){ht(),un()},gt=function(m){l||dn()},bt=Jt(mt),dn=Qt(Ne);Ft(()=>{const m=s||O;Y=$(m,document).y,Ne();const p=new IntersectionObserver(function(M){M[0].intersectionRatio>0&&(Y=$(m,document).y,Ne())});return p.observe(m),new ResizeObserver(function(M){M[0].contentRect.width>0&&N.hoverd(o.el)}).observe(m),K.addEventListener("scroll",gt),()=>{p.disconnect(),K.removeEventListener("scroll",gt)}});function mn(m){be[m?"unshift":"push"](()=>{O=m,n(4,O)})}return e.$$set=m=>{"contentElement"in m&&n(8,r=m.contentElement),"scrollElement"in m&&n(9,c=m.scrollElement),"fixedElement"in m&&n(10,s=m.fixedElement),"headingSelector"in m&&n(11,f=m.headingSelector),"collapsedLevel"in m&&n(0,d=m.collapsedLevel),"idPrefix"in m&&n(12,a=m.idPrefix),"levelClassPrefix"in m&&n(13,u=m.levelClassPrefix),"scrollDuration"in m&&n(1,h=m.scrollDuration),"fixedOffset"in m&&n(14,b=m.fixedOffset),"fixedClassName"in m&&n(15,v=m.fixedClassName),"scrollOffset"in m&&n(2,w=m.scrollOffset),"beforeFixed"in m&&n(18,x=m.beforeFixed),"afterFixed"in m&&n(19,A=m.afterFixed)},at(),[d,h,w,te,O,i,K,an,r,c,s,f,a,u,b,v,g,y,x,A,mn]}class cn extends Qe{constructor(t){super();Je(this,t,rn,sn,ae,{contentElement:8,scrollElement:9,fixedElement:10,headingSelector:11,collapsedLevel:0,idPrefix:12,levelClassPrefix:13,scrollDuration:1,fixedOffset:14,fixedClassName:15,scrollOffset:2,resetHeadings:16,isEmpty:17,beforeFixed:18,afterFixed:19},ln,[-1,-1])}get resetHeadings(){return this.$$.ctx[16]}get isEmpty(){return this.$$.ctx[17]}}const ue=function(e,t,n,o){if(!e&&o)return e;if(typeof e=="string"&&(e=document.querySelector(e)),!(e instanceof HTMLElement))if(n)e=n;else throw new Error(`"${t}"is an invalid selector or non-DOM node`);return e};class fn{constructor(t,n){const{contentSelector:o,scrollSelector:l,fixedSelector:i,headingSelector:r,collapsedLevel:c,idPrefix:s,levelClassPrefix:f,scrollDuration:d,fixedOffset:a,fixedClassName:u,scrollOffset:h,beforeFixed:b,afterFixed:v}=n||{};t=ue(t,"mount");const w=ue(o,"contentSelector",document.body),g=ue(l,"scrollSelector",document.body),y=ue(i,"fixedSelector",null,!0);this.toc=new cn({target:t,props:{contentElement:w,scrollElement:g,fixedElement:y,headingSelector:r,collapsedLevel:Math.max(1,Math.min(c,6))||3,idPrefix:s,levelClassPrefix:f,scrollDuration:d,fixedOffset:a,fixedClassName:u,scrollOffset:h,beforeFixed:b,afterFixed:v}})}resetHeadings(){this.toc.resetHeadings()}isEmpty(){return this.toc.isEmpty()}}return fn});
