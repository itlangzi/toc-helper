(function(p,q){typeof exports=="object"&&typeof module<"u"?module.exports=q():typeof define=="function"&&define.amd?define(q):(p=typeof globalThis<"u"?globalThis:p||self,p.TocHelper=q())})(this,function(){"use strict";function p(){}const q=e=>e;function Ne(e){return e()}function Te(){return Object.create(null)}function M(e){e.forEach(Ne)}function I(e){return typeof e=="function"}function de(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ct(e){return Object.keys(e).length===0}function ut(e,...t){if(e==null)return p;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function te(e,t,n){e.$$.on_destroy.push(ut(t,n))}function D(e,t,n){return e.set(n),t}function at(e){return e&&I(e.destroy)?e.destroy:p}const Ce=typeof window<"u";let Fe=Ce?()=>window.performance.now():()=>Date.now(),me=Ce?e=>requestAnimationFrame(e):p;const R=new Set;function Pe(e){R.forEach(t=>{t.c(e)||(R.delete(t),t.f())}),R.size!==0&&me(Pe)}function Ae(e){let t;return R.size===0&&me(Pe),{promise:new Promise(n=>{R.add(t={c:e,f:n})}),abort(){R.delete(t)}}}function he(e,t){e.appendChild(t)}function dt(e,t,n){const o=ge(e);if(!o.getElementById(t)){const i=B("style");i.id=t,i.textContent=n,He(o,i)}}function ge(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function mt(e){const t=B("style");return He(ge(e),t),t.sheet}function He(e,t){return he(e.head||e,t),t.sheet}function Y(e,t,n){e.insertBefore(t,n||null)}function P(e){e.parentNode&&e.parentNode.removeChild(e)}function ht(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function B(e){return document.createElement(e)}function _e(e){return document.createTextNode(e)}function gt(){return _e(" ")}function Me(){return _e("")}function ne(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function z(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function _t(e){return Array.from(e.childNodes)}function bt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ze(e,t,n){e.classList[n?"add":"remove"](t)}function vt(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}const oe=new Map;let ie=0;function yt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Et(e,t){const n={stylesheet:mt(t),rules:{}};return oe.set(e,n),n}function je(e,t,n,o,i,l,s,u=0){const r=16.666/o;let c=`{
`;for(let b=0;b<=1;b+=r){const O=t+(n-t)*l(b);c+=b*100+`%{${s(O,1-O)}}
`}const d=c+`100% {${s(n,1-n)}}
}`,a=`__svelte_${yt(d)}_${u}`,f=ge(e),{stylesheet:g,rules:_}=oe.get(f)||Et(f,e);_[a]||(_[a]=!0,g.insertRule(`@keyframes ${a} ${d}`,g.cssRules.length));const E=e.style.animation||"";return e.style.animation=`${E?`${E}, `:""}${a} ${o}ms linear ${i}ms 1 both`,ie+=1,a}function be(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?l=>l.indexOf(t)<0:l=>l.indexOf("__svelte")===-1),i=n.length-o.length;i&&(e.style.animation=o.join(", "),ie-=i,ie||wt())}function wt(){me(()=>{ie||(oe.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&P(t)}),oe.clear())})}let J;function Q(e){J=e}function pt(){if(!J)throw new Error("Function called outside component initialization");return J}function St(e){pt().$$.on_mount.push(e)}const U=[],ve=[],le=[],qe=[],Ot=Promise.resolve();let ye=!1;function xt(){ye||(ye=!0,Ot.then(Ie))}function W(e){le.push(e)}const Ee=new Set;let se=0;function Ie(){const e=J;do{for(;se<U.length;){const t=U[se];se++,Q(t),kt(t.$$)}for(Q(null),U.length=0,se=0;ve.length;)ve.pop()();for(let t=0;t<le.length;t+=1){const n=le[t];Ee.has(n)||(Ee.add(n),n())}le.length=0}while(U.length);for(;qe.length;)qe.pop()();ye=!1,Ee.clear(),Q(e)}function kt(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}let X;function Re(){return X||(X=Promise.resolve(),X.then(()=>{X=null})),X}function re(e,t,n){e.dispatchEvent(vt(`${t?"intro":"outro"}${n}`))}const fe=new Set;let A;function we(){A={r:0,c:[],p:A}}function pe(){A.r||M(A.c),A=A.p}function k(e,t){e&&e.i&&(fe.delete(e),e.i(t))}function H(e,t,n,o){if(e&&e.o){if(fe.has(e))return;fe.add(e),A.c.push(()=>{fe.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}const Ye={duration:0};function Lt(e,t,n){let o=t(e,n),i=!1,l,s,u=0;function r(){l&&be(e,l)}function c(){const{delay:a=0,duration:f=300,easing:g=q,tick:_=p,css:E}=o||Ye;E&&(l=je(e,0,1,f,a,g,E,u++)),_(0,1);const b=Fe()+a,O=b+f;s&&s.abort(),i=!0,W(()=>re(e,!0,"start")),s=Ae(C=>{if(i){if(C>=O)return _(1,0),re(e,!0,"end"),r(),i=!1;if(C>=b){const N=g((C-b)/f);_(N,1-N)}}return i})}let d=!1;return{start(){d||(d=!0,be(e),I(o)?(o=o(),Re().then(c)):c())},invalidate(){d=!1},end(){i&&(r(),i=!1)}}}function Dt(e,t,n){let o=t(e,n),i=!0,l;const s=A;s.r+=1;function u(){const{delay:r=0,duration:c=300,easing:d=q,tick:a=p,css:f}=o||Ye;f&&(l=je(e,1,0,c,r,d,f));const g=Fe()+r,_=g+c;W(()=>re(e,!1,"start")),Ae(E=>{if(i){if(E>=_)return a(0,1),re(e,!1,"end"),--s.r||M(s.c),!1;if(E>=g){const b=d((E-g)/c);a(1-b,b)}}return i})}return I(o)?Re().then(()=>{o=o(),u()}):u(),{end(r){r&&o.tick&&o.tick(1,0),i&&(l&&be(e,l),i=!1)}}}function Be(e){e&&e.c()}function Se(e,t,n,o){const{fragment:i,after_update:l}=e.$$;i&&i.m(t,n),o||W(()=>{const s=e.$$.on_mount.map(Ne).filter(I);e.$$.on_destroy?e.$$.on_destroy.push(...s):M(s),e.$$.on_mount=[]}),l.forEach(W)}function Oe(e,t){const n=e.$$;n.fragment!==null&&(M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Nt(e,t){e.$$.dirty[0]===-1&&(U.push(e),xt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function We(e,t,n,o,i,l,s,u=[-1]){const r=J;Q(e);const c=e.$$={fragment:null,ctx:[],props:l,update:p,not_equal:i,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:Te(),dirty:u,skip_bound:!1,root:t.target||r.$$.root};s&&s(c.root);let d=!1;if(c.ctx=n?n(e,t.props||{},(a,f,...g)=>{const _=g.length?g[0]:f;return c.ctx&&i(c.ctx[a],c.ctx[a]=_)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](_),d&&Nt(e,a)),f}):[],c.update(),d=!0,M(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const a=_t(t.target);c.fragment&&c.fragment.l(a),a.forEach(P)}else c.fragment&&c.fragment.c();t.intro&&k(e.$$.fragment),Se(e,t.target,t.anchor,t.customElement),Ie()}Q(r)}class Ke{$destroy(){Oe(this,1),this.$destroy=p}$on(t,n){if(!I(n))return p;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!ct(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xe=window.requestAnimationFrame,Tt=window.cancelAnimationFrame,v=function(e,t,...n){if(typeof e=="function")return e.call(t,...n)},ce=function(e){return e===document.body||e===document},Ve=/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)?"touchstart":"click",Ct=/^h(\d)$/i;let ke=0;const Ft=(e,t,n,o,i,l,s)=>{i=i||"bitoc-heading-",l=l||"bitoc-ml-";let u=e.getAttribute("id");ke=ke+1;let r=u;u||(u=i+ke);const c=(e.textContent||"").trim();return{class:l+t,title:c,parent:o,target:e,level:t,oriLevel:n,id:u,oriId:r,y:Z(e,s).y}},Ge=function(e,t){return e?e.level===t?e.parent:e.level===t-1?e:Ge(e.parent,t):null},Pt=(e,t,n,o)=>{if(!e||!e.length)return{nodes:[],offsets:{}};const i={},l=[];let s=null;return e.forEach(u=>{let r=null;const c=Ct.exec(u.nodeName);c?r=c[1]:r=u.getAttribute("data-level"),r=parseInt(r),r=Math.max(1,Math.min(r,6))||6;let d=r,a=null;s?s.level>=r?(a=Ge(s.parent,r),d=a?a.level+1:1):(d=s.level+1,a=s):(d=1,a=null);const f=Ft(u,d,r,a,t,n,o);a?a.nodes?a.nodes.push(f):a.nodes=[f]:l.push(f),s=f,i[f.y]=f}),{nodes:l,offsets:i}},At=function(e,t=16){let n,o=!1,i=Date.now();const l=()=>{o=!0,n&&Tt(n)},s=()=>{if(!o){if(Date.now()-i>=t){l(),v(e,this,n);return}n=xe(s)}};return s(),l},Ht=function(e,t=24){let n=null;return function(){const o=this,i=arguments,l=Date.now();(!n||l-n>t)&&(e.apply(o,i),n=l)}},Mt=function(e,t,n){(e<=0||isNaN(e))&&(e=500);const o=Date.now();let i=!0;return xe(function l(){const s=(Date.now()-o)/e;v(t,void 0,s),s>=1&&(t(1),i=!1,v(n,void 0,1)),i&&xe(l)}),function(){i=!1}},Je=function(e){return e.scrollHeight>e.clientHeight},Z=function(e,t){let n=t;(!t||ce(t))&&(n=document.documentElement);let o=e.offsetTop||0,i=e.offsetLeft||0;const l=e.offsetParent;if(ce(e)||!l)return{x:i,y:o};if(l===n.offsetParent){const s=n.offsetTop||0,u=n.offsetLeft||0;return{x:i-u,y:o-s}}if(l!==n){const s=Z(l);o+=s.y,i+=s.x}return{x:i,y:o}},ue=function(e){return e===window?e.screenY:e===document?document.scrollingElement.scrollTop:e.scrollTop},zt=function(e,t,n){if(t&&!n)return window.getComputedStyle(e).getPropertyValue(t);e.style[t]=n},Qe=function(e){return ce(e)?document:!e||Je(e)?e:zt(e,"position")==="fixed"||!e.parentElement?document:Qe(e.parentElement)},Ue=(e,t,n,o)=>{let i=0;const l=o||100;return function s(u,r,c){if(ue(u)===r)i=0,v(c);else{if(i>l){i=0,v(c);return}i+=1,At(()=>{s(u,r,c)})}}(e,t,n)},Xe=function(e,t,n=200,o){if(Je(e)){const i=ue(e),l=t-i;Mt(n,s=>{e.scrollTo({left:0,top:i+s*l,behavior:"smooth"})},o)}else v(o,void 0,1)};function jt(e){const t=e-1;return t*t*t+1}const Ze=function(e,{delay:t=0,duration:n=150,easing:o=jt}={}){const i=getComputedStyle(e),l=+i.opacity,s=parseFloat(i.height);return{delay:t,duration:n,easing:o,css:u=>`opacity: ${Math.min(u*20,1)*l}; max-height: ${u*s}px;`}},K=[];function $e(e,t=p){let n;const o=new Set;function i(u){if(de(e,u)&&(e=u,n)){const r=!K.length;for(const c of o)c[1](),K.push(c,e);if(r){for(let c=0;c<K.length;c+=2)K[c][0](K[c+1]);K.length=0}}}function l(u){i(u(e))}function s(u,r=p){const c=[u,r];return o.add(c),o.size===1&&(n=t(i)||p),u(e),()=>{o.delete(c),o.size===0&&(n(),n=null)}}return{set:i,update:l,subscribe:s}}const T=$e(0),$=$e(null);function et(e,t,n){const o=e.slice();return o[18]=t[n],o}function tt(e){let t,n,o,i,l,s,u=e[0],r=[];for(let d=0;d<u.length;d+=1)r[d]=ot(et(e,u,d));const c=d=>H(r[d],1,1,()=>{r[d]=null});return{c(){t=B("div");for(let d=0;d<r.length;d+=1)r[d].c();z(t,"class","bitoc-nav")},m(d,a){Y(d,t,a);for(let f=0;f<r.length;f+=1)r[f].m(t,null);i=!0,l||(s=[ne(t,"introstart",e[10]),ne(t,"introend",e[11]),ne(t,"outrostart",e[12]),ne(t,"outroend",e[13])],l=!0)},p(d,a){if(a&495){u=d[0];let f;for(f=0;f<u.length;f+=1){const g=et(d,u,f);r[f]?(r[f].p(g,a),k(r[f],1)):(r[f]=ot(g),r[f].c(),k(r[f],1),r[f].m(t,null))}for(we(),f=u.length;f<r.length;f+=1)c(f);pe()}},i(d){if(!i){for(let a=0;a<u.length;a+=1)k(r[a]);W(()=>{o&&o.end(1),n=Lt(t,Ze,{}),n.start()}),i=!0}},o(d){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)H(r[a]);n&&n.invalidate(),o=Dt(t,Ze,{}),i=!1},d(d){d&&P(t),ht(r,d),d&&o&&o.end(),l=!1,M(s)}}}function nt(e){let t,n;return t=new it({props:{nodes:e[18].nodes,parent:e[18],scrollOffset:e[6],onNav:e[5],scrollElement:e[1],scrollDuration:e[2],collapsedLevel:e[3],transitionEnd:e[7]}}),{c(){Be(t.$$.fragment)},m(o,i){Se(t,o,i),n=!0},p(o,i){const l={};i&1&&(l.nodes=o[18].nodes),i&1&&(l.parent=o[18]),i&64&&(l.scrollOffset=o[6]),i&32&&(l.onNav=o[5]),i&2&&(l.scrollElement=o[1]),i&4&&(l.scrollDuration=o[2]),i&8&&(l.collapsedLevel=o[3]),i&128&&(l.transitionEnd=o[7]),t.$set(l)},i(o){n||(k(t.$$.fragment,o),n=!0)},o(o){H(t.$$.fragment,o),n=!1},d(o){Oe(t,o)}}}function ot(e){let t,n=e[18].title+"",o,i,l,s,u,r,c,d,a,f=e[18].nodes&&e[18].nodes.length&&nt(e);return{c(){t=B("a"),o=_e(n),u=gt(),f&&f.c(),r=Me(),z(t,"href",i="#"+e[18].id),z(t,"class",l=e[18].class),ze(t,"active",e[8]===e[18])},m(g,_){Y(g,t,_),he(t,o),Y(g,u,_),f&&f.m(g,_),Y(g,r,_),c=!0,d||(a=at(s=e[9].call(null,t,e[18])),d=!0)},p(g,_){e=g,(!c||_&1)&&n!==(n=e[18].title+"")&&bt(o,n),(!c||_&1&&i!==(i="#"+e[18].id))&&z(t,"href",i),(!c||_&1&&l!==(l=e[18].class))&&z(t,"class",l),s&&I(s.update)&&_&1&&s.update.call(null,e[18]),(!c||_&257)&&ze(t,"active",e[8]===e[18]),e[18].nodes&&e[18].nodes.length?f?(f.p(e,_),_&1&&k(f,1)):(f=nt(e),f.c(),k(f,1),f.m(r.parentNode,r)):f&&(we(),H(f,1,1,()=>{f=null}),pe())},i(g){c||(k(f),c=!0)},o(g){H(f),c=!1},d(g){g&&P(t),g&&P(u),f&&f.d(g),g&&P(r),d=!1,a()}}}function qt(e){let t=!e[14](e[8],e[4]),n,o,i=t&&tt(e);return{c(){i&&i.c(),n=Me()},m(l,s){i&&i.m(l,s),Y(l,n,s),o=!0},p(l,[s]){s&272&&(t=!l[14](l[8],l[4])),t?i?(i.p(l,s),s&272&&k(i,1)):(i=tt(l),i.c(),k(i,1),i.m(n.parentNode,n)):i&&(we(),H(i,1,1,()=>{i=null}),pe())},i(l){o||(k(i),o=!0)},o(l){H(i),o=!1},d(l){i&&i.d(l),l&&P(n)}}}function It(e,t,n){let o,i;te(e,T,h=>n(16,o=h)),te(e,$,h=>n(8,i=h));let{nodes:l=[]}=t,{scrollElement:s}=t,{scrollDuration:u}=t,{collapsedLevel:r}=t,{parent:c=null}=t,{onNav:d=null}=t,{scrollOffset:a=0}=t,{transitionStart:f=null}=t,{transitionEnd:g=null}=t;const _=function(h,y){y.element=h;let S=y;const V=function(L){L.preventDefault(),D($,i=S,i);let j=s;s.scrollingElement&&(j=s.scrollingElement);const G=S.y-a;D(T,o=o+1,o),Xe(j,G,u,function(){if(typeof d!="function"){Ue(j,G,()=>{D(T,o=o-1,o)});return}d(L.target,S,function(){Ue(j,G,()=>{D(T,o=o-1,o)})})})};return h.addEventListener(Ve,V),{update(L){S=L,S.element=h},destory(){y.element=null,S=null,h.removeEventListener(Ve,V)}}},E=h=>{D(T,o=o+1,o),v(f,void 0,h)},b=h=>{D(T,o=o-1,o),v(g,void 0,h)},O=h=>{D(T,o=o+1,o),v(f,void 0,h)},C=h=>{D(T,o=o-1,o),v(g,void 0,h)},N=function(h,y){return h&&y?h===y?!0:N(h.parent,y):!1},Le=function(h,y){return!h||!y?!1:y.level+1>r&&!N(h,y)};return e.$$set=h=>{"nodes"in h&&n(0,l=h.nodes),"scrollElement"in h&&n(1,s=h.scrollElement),"scrollDuration"in h&&n(2,u=h.scrollDuration),"collapsedLevel"in h&&n(3,r=h.collapsedLevel),"parent"in h&&n(4,c=h.parent),"onNav"in h&&n(5,d=h.onNav),"scrollOffset"in h&&n(6,a=h.scrollOffset),"transitionStart"in h&&n(15,f=h.transitionStart),"transitionEnd"in h&&n(7,g=h.transitionEnd)},[l,s,u,r,c,d,a,g,i,_,E,b,O,C,Le,f]}class it extends Ke{constructor(t){super(),We(this,t,It,qt,de,{nodes:0,scrollElement:1,scrollDuration:2,collapsedLevel:3,parent:4,onNav:5,scrollOffset:6,transitionStart:15,transitionEnd:7})}}function Rt(e){dt(e,"svelte-f3ug8b",'.bitoc.svelte-f3ug8b.svelte-f3ug8b,.bitoc.svelte-f3ug8b .svelte-f3ug8b{box-sizing:border-box}.bitoc-fixed{position:fixed !important}.bitoc.svelte-f3ug8b.svelte-f3ug8b{width:100%;position:relative;overflow-y:auto;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scroll-behavior:smooth}.bitoc.svelte-f3ug8b.svelte-f3ug8b::-webkit-scrollbar{width:0 !important}.bitoc-nav a{display:block;padding:0.2rem 1.7rem;font-size:0.9rem;text-decoration:none;color:#555;position:relative;transition:all 0.25s}.bitoc-nav{overflow:hidden;transition:max-height 0.25s}.bitoc-nav a:before{content:" ";height:0.25rem;width:0.25rem;background:#555;position:absolute;top:0.72rem;left:1rem}.bitoc-nav a:hover, .bitoc-nav a.active{color:#009a61}.bitoc-nav a.active::before, .bitoc-nav a:hover:before{background:#009a61}.bitoc-nav a.bitoc-ml-2{margin-left:1rem !important}.bitoc-nav a.bitoc-ml-3{margin-left:2rem !important}.bitoc-nav a.bitoc-ml-4{margin-left:3rem !important}.bitoc-nav a.bitoc-ml-5{margin-left:4rem !important}.bitoc-nav a.bitoc-ml-6{margin-left:5rem !important}')}function Yt(e){let t,n,o,i;return o=new it({props:{scrollOffset:e[2],collapsedLevel:e[0],scrollDuration:e[1],nodes:e[3],scrollElement:e[5],transitionEnd:e[6]}}),{c(){t=B("main"),n=B("div"),Be(o.$$.fragment),z(n,"class","bitoc-navs svelte-f3ug8b"),z(t,"class","bitoc svelte-f3ug8b")},m(l,s){Y(l,t,s),he(t,n),Se(o,n,null),e[20](t),i=!0},p(l,s){const u={};s[0]&4&&(u.scrollOffset=l[2]),s[0]&1&&(u.collapsedLevel=l[0]),s[0]&2&&(u.scrollDuration=l[1]),s[0]&8&&(u.nodes=l[3]),o.$set(u)},i(l){i||(k(o.$$.fragment,l),i=!0)},o(l){H(o.$$.fragment,l),i=!1},d(l){l&&P(t),Oe(o),e[20](null)}}}function Bt(e,t,n){let o,i;te(e,T,m=>n(24,o=m)),te(e,$,m=>n(25,i=m));let{contentElement:l}=t,{scrollElement:s}=t,{fixedElement:u}=t,{headingSelector:r}=t,{collapsedLevel:c=3}=t,{idPrefix:d=""}=t,{levelClassPrefix:a=""}=t,{scrollDuration:f=200}=t,{fixedOffset:g=0}=t,{fixedClassName:_="bitoc-fixed"}=t,{scrollOffset:E=0}=t,{beforeFixed:b=null}=t,{afterFixed:O=null}=t;const C=function(){G(),ee()},N=function(){return h.length===0},Le=function(){V=Z(u||S,document.documentElement).y,ee()};let h=[],y={},S=null,V=0,L=Qe(s),j=[];const G=function(){const m=l.querySelectorAll(r||"h1, h2, h3, h4, h5, h6"),x=Pt(m,d,a,L);n(3,h=x.nodes),y=x.offsets,j=Object.keys(y).map(Number);const w=lt();y[w]&&D($,i=y[w],i)},lt=function(){const m=ue(L);return j.find(x=>x>=m)},Vt=function(m){if(N())return;const x=lt(),w=y[x];if(x!==void 0&&w){D($,i=w,i);const F=w.element;Gt(F,m)}else v(m)},Gt=function(m,x){if(N()){v(x);return}let w=S;if(m&&w){let F=Z(m,w).y;const De=w.offsetHeight,rt=w.scrollHeight-De,ft=De/2;F<=ft?F=0:F-De>rt?F=rt:F=F-ft,Xe(w,F,f,()=>{v(x)})}else v(x)},Jt=function(){if(!N()&&g!==!1&&_&&ce(L)){const m=u||S,x=ue(document);let w=g;if(w||(w=V),x>=w){if(!m.classList.contains(_)){if(v(b,void 0,!0)===!1)return;m.classList.add(_),v(O,void 0,!0)}}else if(m.classList.contains(_)){if(v(b,void 0,!1)===!1)return;m.classList.remove(_),v(O,void 0,!1)}}},st=function(){Jt(),o===0&&Vt()},ee=function(){Ut()},Qt=()=>{st()},Ut=Ht(st,16);St(()=>(V=Z(u||S,document.documentElement).y,ee(),L.addEventListener("scroll",ee),()=>{L.removeEventListener("scroll",ee)}));function Xt(m){ve[m?"unshift":"push"](()=>{S=m,n(4,S)})}return e.$$set=m=>{"contentElement"in m&&n(7,l=m.contentElement),"scrollElement"in m&&n(8,s=m.scrollElement),"fixedElement"in m&&n(9,u=m.fixedElement),"headingSelector"in m&&n(10,r=m.headingSelector),"collapsedLevel"in m&&n(0,c=m.collapsedLevel),"idPrefix"in m&&n(11,d=m.idPrefix),"levelClassPrefix"in m&&n(12,a=m.levelClassPrefix),"scrollDuration"in m&&n(1,f=m.scrollDuration),"fixedOffset"in m&&n(13,g=m.fixedOffset),"fixedClassName"in m&&n(14,_=m.fixedClassName),"scrollOffset"in m&&n(2,E=m.scrollOffset),"beforeFixed"in m&&n(15,b=m.beforeFixed),"afterFixed"in m&&n(16,O=m.afterFixed)},G(),[c,f,E,h,S,L,Qt,l,s,u,r,d,a,g,_,b,O,C,N,Le,Xt]}class Wt extends Ke{constructor(t){super(),We(this,t,Bt,Yt,de,{contentElement:7,scrollElement:8,fixedElement:9,headingSelector:10,collapsedLevel:0,idPrefix:11,levelClassPrefix:12,scrollDuration:1,fixedOffset:13,fixedClassName:14,scrollOffset:2,beforeFixed:15,afterFixed:16,reset:17,isEmpty:18,syncScroll:19},Rt,[-1,-1])}get reset(){return this.$$.ctx[17]}get isEmpty(){return this.$$.ctx[18]}get syncScroll(){return this.$$.ctx[19]}}const ae=function(e,t,n,o){if(!(!e&&o)){if(typeof e=="string"&&(e=document.querySelector(e)),!(e instanceof HTMLElement))if(n)e=n;else throw new Error(`"${t}"is an invalid selector or non-DOM node`);return e}};class Kt{constructor(t,n){const{contentSelector:o,scrollSelector:i,fixedSelector:l,headingSelector:s,collapsedLevel:u,idPrefix:r,levelClassPrefix:c,scrollDuration:d,fixedOffset:a,fixedClassName:f,scrollOffset:g,beforeFixed:_,afterFixed:E}=n||{};t=ae(t,"mount");const b=ae(o,"contentSelector",document.body),O=ae(i,"scrollSelector",document.body),C=ae(l,"fixedSelector",null,!0);this.toc=new Wt({target:t,props:{contentElement:b,scrollElement:O,fixedElement:C,headingSelector:s,collapsedLevel:Math.max(1,Math.min(u,6))||3,idPrefix:r,levelClassPrefix:c,scrollDuration:d,fixedOffset:a,fixedClassName:f,scrollOffset:g,beforeFixed:_,afterFixed:E}})}reset(){this.toc.reset()}isEmpty(){return this.toc.isEmpty()}syncScroll(){this.toc.syncScroll()}}return Kt});
